workflow_name,run_id,run_status,run_conclusion,commit_id,commit_message,commit_author,commit_date,commit_size,files_changed,pull_request_id,pull_request_title,pull_request_author,pull_request_created_at,Pull_request_label,pull_request_body,pull_request_conversation
.github/workflows/ansible.molecule.fo.yml,7478862711,completed,failure,f232748d37ae1d824791987c5fd8c7d9204a2ff8,Remove running TPv2 server and collecting logs,ocket8888,2024-01-10T17:52:23Z,13,"['.github/actions/tpv2-integration-tests/config.json', '.github/actions/tpv2-integration-tests/entrypoint.sh', '.github/workflows/tpv2.yml']",7894,Switch TPv2 E2E tests to Cypress,ocket8888,2024-01-06T19:09:17Z,"['low impact', 'tech debt', 'experimental', 'Traffic Portal v2']","This PR switches the TPv2 E2E testing suite from NightwatchJS to Cypress.

""Why?"", you may ask. Because it took me all of two days to replicate all of our test suite in Cypress - that's how easy it is to use. For comparison: _I have never even once been able to get the Nightwatch tests to run on my machine_. With Cypress, the typings are provided by the library itself, testing on Chrome and Firefox took exactly zero time and effort to figure out, and the tests actually just do the things I want them to do without me having to spend countless hours needling them with the correct set of `await`s and chained commands. Which is why most all of our tests do little more than check for the presence of some DOM elements. Maybe with Cypress, we could fix that.

tl;dr: Nightwatch is extremely hard to use and Cypress is extremely easy.

<hr/>

## Which Traffic Control components are affected by this PR?
- Traffic Portal (experimental v2)

## What is the best way to verify this PR?
Run the end-to-end tests. Which doesn't take very long and can be depended upon to actually work.

## PR submission checklist
- [x] This PR has tests
- [x] This PR has documentation
- [x] This PR doesn't need a CHANGELOG.md entry
- [x] This PR **DOES NOT FIX A SERIOUS SECURITY VULNERABILITY**","[{'comment_body': 'This is making the TPv2 RPM fail to build\r\n\r\nFrom the PR of #7922:\r\n\r\n> npm ERR! Cypress cannot write to the cache directory due to file permissions'}, {'comment_body': ""that's interesting. It shouldn't be attempting to compile or run the e2e tests to build the RPM.""}, {'comment_body': 'Reverted due to breaking tests in 4b6af898d8, please re-PR with tests fixed'}, {'comment_body': ""Reverting something experimental because it affects the ability to build distributables for something that isn't distributed (because it's experimental) seems a bit extreme.""}, {'comment_body': ""If we don't want it to affect the default builds, then\r\n\r\n- It should not be built when someone just runs `./pkg` without specifying optional builds with `-o`, and\r\n- It should not be included in the *CDN-in-a-Box CI* GHA workflow.\r\n\r\nBut because it is included in `./pkg` by default and the *CDN-in-a-Box CI* GHA workflow, it broke tests for completely unrelated components, and that's why it was reverted.""}, {'comment_body': '> - _""It should not be built when someone just runs `./pkg` without specifying optional builds with `-o`, and""_\r\n\r\nThat should definitely never have been true. That\'s a bug in `pkg`, far as I\'m concerned.\r\n\r\n> - _""It should not be included in the CDN-in-a-Box CI GHA workflow.""_\r\n\r\nAlso should never have been true, but additionally: why is a test that depends on and explicitly uses something not run when that thing changes? Two bugs in the GHAs.\r\n'}, {'comment_body': ""AFAIAC, the bug that lead to the revert is that TPv2 is included in the *CDN-in-a-Box CI* GHA workflow but its paths don't trigger it. If the *CDN-in-a-Box CI* GHA had failed (due to the breaking changes in #7894), it would not have gotten merged and would not need to be reverted.""}]"
