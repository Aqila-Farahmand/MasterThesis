workflow_name,run_id,run_status,run_conclusion,commit_id,commit_message,commit_author,commit_date,commit_size,files_changed,pull_request_id,pull_request_title,pull_request_author,pull_request_created_at,Pull_request_label,pull_request_body,pull_request_conversation
.github/workflows/ansible.molecule.fo.yml,7605655524,completed,failure,d8e78deb56c21e0c321ff307944b24ac064876a9,"Switch TPv2 E2E tests to Cypress (#7894)

* Port the login e2e test to cypress

* Add initial mock data loading for Cypress

* Remove unnecessary example file

* Extract login to a custom command for reuse

* Convert CG tests to Cypress

* Simplify mock data structure

* Add missing enablement check

* Convert Divisions tests to Cypress

* Convert Regions tests to Cypress

* Convert Coordinates tests to Cypress

* Convert ASN tests to Cypress

* Convert CDN tests to Cypress

* Convert DS tests to Cypress

* Convert Parameter tests to Cypress

* Convert Profile tests to Cypress

* Convert server tests to Cypress

* Convert server Capability tests to Cypress

* Convert Physical Location tests to Cypress

* Fix weird name in fixture data

* Convert Status tests to Cypress

* Convert Type tests to Cypress

* Add a model for the login data

* Convert User tests to Cypress

* Convert Change Log tests to Cypress

* Convert Role tests to Cypress

* Convert Tenant tests to Cypress

* Remove testing initial stup for nightwatch

* Move documentation to the cypress directory

* Remove lingering nightwatch files

* Add headless run NPM script

* Remove Angular architect runner for nightwatch

* Add screenshots to .gitignore

* Remove lingering Nightwatch references

Also ran npm audit fix

* Remove now-unnecessary step in TPv2 workflow

* Fix waiting for a server that won't ever start

* (Re-?)Install @angular-devkit/architect

* Fix TO API port

* Fix GHA artifact paths

* Remove running TPv2 server and collecting logs",ocket8888,2024-01-22T02:22:51Z,51402,"['.github/actions/tpv2-integration-tests/config.json', '.github/actions/tpv2-integration-tests/entrypoint.sh', '.github/workflows/tpv2.yml', 'experimental/traffic-portal/.gitignore', 'experimental/traffic-portal/README.md', 'experimental/traffic-portal/angular.json', 'experimental/traffic-portal/cypress.config.ts', 'experimental/traffic-portal/cypress/.gitignore', 'experimental/traffic-portal/cypress/README.md', 'experimental/traffic-portal/cypress/e2e/cacheGroups/asns/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/asns/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/coordinates/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/coordinates/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/divisions/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/divisions/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/regions/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/regions/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/cacheGroups/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/cdns/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/deliveryServices/ds.card.cy.ts', 'experimental/traffic-portal/cypress/e2e/deliveryServices/ds.details.cy.ts', 'experimental/traffic-portal/cypress/e2e/deliveryServices/ds.invalidate.cy.ts', 'experimental/traffic-portal/cypress/e2e/login.cy.ts', 'experimental/traffic-portal/cypress/e2e/parameters/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/parameters/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/profiles/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/profiles/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/servers/capabilities/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/servers/capabilities/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/servers/physical.location/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/servers/physical.location/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/servers/servers.detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/servers/servers.table.cy.ts', 'experimental/traffic-portal/cypress/e2e/statuses/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/statuses/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/types/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/types/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/users/changeLogs.cy.ts', 'experimental/traffic-portal/cypress/e2e/users/role/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/users/role/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/users/tenant/detail.cy.ts', 'experimental/traffic-portal/cypress/e2e/users/tenant/table.cy.ts', 'experimental/traffic-portal/cypress/e2e/users/users.cy.ts', 'experimental/traffic-portal/cypress/fixtures/login.json', 'experimental/traffic-portal/cypress/fixtures/to.config.json', 'experimental/traffic-portal/cypress/support/commands.ts', 'experimental/traffic-portal/cypress/support/component-index.html', 'experimental/traffic-portal/cypress/support/component.ts', 'experimental/traffic-portal/cypress/support/e2e.ts', 'experimental/traffic-portal/cypress/support/testing.data.ts', 'experimental/traffic-portal/cypress/tsconfig.json', 'experimental/traffic-portal/nightwatch/.eslintrc.json', 'experimental/traffic-portal/nightwatch/README.md', 'experimental/traffic-portal/nightwatch/config.json', 'experimental/traffic-portal/nightwatch/dataClient.ts', 'experimental/traffic-portal/nightwatch/globals/globals.ts', 'experimental/traffic-portal/nightwatch/globals/tables/index.ts', 'experimental/traffic-portal/nightwatch/nightwatch.conf.js', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/asnDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/asnsTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/cacheGroupDetails.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/cacheGroupsTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/coordinateDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/coordinatesTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/divisionDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/divisionsTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/regionDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/cacheGroups/regionsTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/cdns/cdnDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/common.ts', 'experimental/traffic-portal/nightwatch/page_objects/deliveryServices/deliveryServiceCard.ts', 'experimental/traffic-portal/nightwatch/page_objects/deliveryServices/deliveryServiceDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/login.ts', 'experimental/traffic-portal/nightwatch/page_objects/parameters/parameterDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/parameters/parametersTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/profiles/profileDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/profiles/profilesTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/servers/capabilities/capabilitiesTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/servers/capabilities/capabilityDetails.ts', 'experimental/traffic-portal/nightwatch/page_objects/servers/physLocDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/servers/physLocTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/servers/serversDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/servers/serversTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/statuses/statusDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/statuses/statusesTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/types/typeDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/types/typesTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/users/changeLogs.ts', 'experimental/traffic-portal/nightwatch/page_objects/users/roleDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/users/rolesTable.ts', 'experimental/traffic-portal/nightwatch/page_objects/users/tenantDetail.ts', 'experimental/traffic-portal/nightwatch/page_objects/users/tenants.ts', 'experimental/traffic-portal/nightwatch/page_objects/users/users.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/asns/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/asns/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/coordinates/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/coordinates/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/divisions/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/divisions/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/regions/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/regions/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cacheGroups/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/cdns/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/deliveryServices/ds.card.spec.ts', 'experimental/traffic-portal/nightwatch/tests/deliveryServices/ds.details.spec.ts', 'experimental/traffic-portal/nightwatch/tests/deliveryServices/ds.invalidate.spec.ts', 'experimental/traffic-portal/nightwatch/tests/login/login.spec.ts', 'experimental/traffic-portal/nightwatch/tests/parameters/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/parameters/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/profiles/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/profiles/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/servers/capabilities/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/servers/capabilities/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/servers/physLoc/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/servers/physLoc/table.spec.ts', 'experimental/traffic-portal/nightwatch/tests/servers/servers.detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/statuses/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/types/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/users/role/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/users/tenant/detail.spec.ts', 'experimental/traffic-portal/nightwatch/tests/users/users.spec.ts', 'experimental/traffic-portal/nightwatch/tsconfig.e2e.json', 'experimental/traffic-portal/package-lock.json', 'experimental/traffic-portal/package.json']",7894,Switch TPv2 E2E tests to Cypress,ocket8888,2024-01-06T19:09:17Z,"['low impact', 'tech debt', 'experimental', 'Traffic Portal v2']","This PR switches the TPv2 E2E testing suite from NightwatchJS to Cypress.

""Why?"", you may ask. Because it took me all of two days to replicate all of our test suite in Cypress - that's how easy it is to use. For comparison: _I have never even once been able to get the Nightwatch tests to run on my machine_. With Cypress, the typings are provided by the library itself, testing on Chrome and Firefox took exactly zero time and effort to figure out, and the tests actually just do the things I want them to do without me having to spend countless hours needling them with the correct set of `await`s and chained commands. Which is why most all of our tests do little more than check for the presence of some DOM elements. Maybe with Cypress, we could fix that.

tl;dr: Nightwatch is extremely hard to use and Cypress is extremely easy.

<hr/>

## Which Traffic Control components are affected by this PR?
- Traffic Portal (experimental v2)

## What is the best way to verify this PR?
Run the end-to-end tests. Which doesn't take very long and can be depended upon to actually work.

## PR submission checklist
- [x] This PR has tests
- [x] This PR has documentation
- [x] This PR doesn't need a CHANGELOG.md entry
- [x] This PR **DOES NOT FIX A SERIOUS SECURITY VULNERABILITY**","[{'comment_body': 'This is making the TPv2 RPM fail to build\r\n\r\nFrom the PR of #7922:\r\n\r\n> npm ERR! Cypress cannot write to the cache directory due to file permissions'}, {'comment_body': ""that's interesting. It shouldn't be attempting to compile or run the e2e tests to build the RPM.""}, {'comment_body': 'Reverted due to breaking tests in 4b6af898d8, please re-PR with tests fixed'}, {'comment_body': ""Reverting something experimental because it affects the ability to build distributables for something that isn't distributed (because it's experimental) seems a bit extreme.""}, {'comment_body': ""If we don't want it to affect the default builds, then\r\n\r\n- It should not be built when someone just runs `./pkg` without specifying optional builds with `-o`, and\r\n- It should not be included in the *CDN-in-a-Box CI* GHA workflow.\r\n\r\nBut because it is included in `./pkg` by default and the *CDN-in-a-Box CI* GHA workflow, it broke tests for completely unrelated components, and that's why it was reverted.""}, {'comment_body': '> - _""It should not be built when someone just runs `./pkg` without specifying optional builds with `-o`, and""_\r\n\r\nThat should definitely never have been true. That\'s a bug in `pkg`, far as I\'m concerned.\r\n\r\n> - _""It should not be included in the CDN-in-a-Box CI GHA workflow.""_\r\n\r\nAlso should never have been true, but additionally: why is a test that depends on and explicitly uses something not run when that thing changes? Two bugs in the GHAs.\r\n'}, {'comment_body': ""AFAIAC, the bug that lead to the revert is that TPv2 is included in the *CDN-in-a-Box CI* GHA workflow but its paths don't trigger it. If the *CDN-in-a-Box CI* GHA had failed (due to the breaking changes in #7894), it would not have gotten merged and would not need to be reverted.""}]"
